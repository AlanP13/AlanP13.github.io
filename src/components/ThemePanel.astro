<div class="wrap">
  <div class="row">
    <div>
      <div class="label">Theme</div>
      <div class="seg" role="group" aria-label="Theme flavor">
        <button data-flavor="latte">Latte</button>
        <button data-flavor="frappe">Frappe</button>
        <button data-flavor="macchiato">Macchiato</button>
        <button data-flavor="mocha">Mocha</button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="label">Accent</div>
    <div class="chips">
      <button class="chip" data-accent="#8ab4ff" aria-label="Blue"></button>
      <button class="chip" data-accent="#8bd5ca" aria-label="Teal"></button>
      <button class="chip" data-accent="#f5a97f" aria-label="Peach"></button>
      <button class="chip" data-accent="#f38ba8" aria-label="Pink"></button>
      <button class="chip" data-accent="#cba6f7" aria-label="Lavender"></button>
    </div>
  </div>

  <div class="row toggle">
    <label>
      <input id="bgfx" type="checkbox" />
      <span>Background effect</span>
    </label>
  </div>
</div>

<script>
  const root = document.documentElement;

  const FLAVORS = {
    latte:   { bg:"#f6f7fb", card:"#ffffff", text:"#111827", muted:"#4b5563", border:"rgba(17,24,39,0.12)" },
    frappe:  { bg:"#1b1f2a", card:"#23283a", text:"#e8eefc", muted:"#a7b3cc", border:"rgba(255,255,255,0.10)" },
    macchiato:{bg:"#121826", card:"#161f33", text:"#e8eefc", muted:"#a7b3cc", border:"rgba(255,255,255,0.10)" },
    mocha:   { bg:"#0b0f17", card:"#101827", text:"#e8eefc", muted:"#a7b3cc", border:"rgba(255,255,255,0.10)" },
  };

  function applyFlavor(name) {
    const f = FLAVORS[name] || FLAVORS.mocha;
    root.style.setProperty("--bg", f.bg);
    root.style.setProperty("--card", f.card);
    root.style.setProperty("--text", f.text);
    root.style.setProperty("--muted", f.muted);
    root.style.setProperty("--border", f.border);
    localStorage.setItem("flavor", name);
  }

  function applyAccent(hex) {
    root.style.setProperty("--accent", hex);
    localStorage.setItem("accent", hex);
  }

  function applyBgfx(on) {
    root.dataset.bgfx = on ? "on" : "off";
    localStorage.setItem("bgfx", on ? "on" : "off");
  }

  // init
  applyFlavor(localStorage.getItem("flavor") || "mocha");
  applyAccent(localStorage.getItem("accent") || "#8ab4ff");
  const bgfx = (localStorage.getItem("bgfx") || "off") === "on";
  const box = document.getElementById("bgfx");
  box.checked = bgfx;
  applyBgfx(bgfx);

  document.querySelectorAll("[data-flavor]").forEach(btn => {
    btn.addEventListener("click", () => applyFlavor(btn.dataset.flavor));
  });

  document.querySelectorAll("[data-accent]").forEach(btn => {
    btn.addEventListener("click", () => applyAccent(btn.dataset.accent));
  });

  box.addEventListener("change", () => applyBgfx(box.checked));
</script>

<style>
  .wrap { display:flex; flex-direction:column; gap: 12px; }
  .label { color: var(--muted); font-size: 13px; margin-bottom: 8px; }
  .seg { display:flex; gap: 8px; flex-wrap: wrap; }
  .seg button { border: 1px solid var(--border); background: rgba(255,255,255,0.02); color: var(--text); padding: 8px 10px; border-radius: 999px; font-size: 13px; cursor: pointer; }
  .chips { display:flex; gap: 8px; flex-wrap: wrap; }
  .chip { width: 22px; height: 22px; border-radius: 999px; border: 1px solid var(--border); cursor: pointer; background: var(--accent); }
  .chip[data-accent="#8ab4ff"] { background:#8ab4ff; }
  .chip[data-accent="#8bd5ca"] { background:#8bd5ca; }
  .chip[data-accent="#f5a97f"] { background:#f5a97f; }
  .chip[data-accent="#f38ba8"] { background:#f38ba8; }
  .chip[data-accent="#cba6f7"] { background:#cba6f7; }

  .toggle label { display:flex; gap: 10px; align-items:center; color: var(--muted); font-size: 14px; }
</style>
