---
import SiteLayout from "../layouts/SiteLayout.astro";
import { getCollection } from "astro:content";

/** âœ… Eager-load all organization logos from /src/assets/organizations */
const orgLogoModules = import.meta.glob("../assets/organizations/*.png", {
  eager: true,
});

/** Build a map like: { IIT: "/_astro/IIT.hash.png", Genworth: "/_astro/Genworth.hash.png" } */
const orgLogos = Object.fromEntries(
  Object.entries(orgLogoModules).map(([path, mod]: [string, any]) => {
    const key = path.split("/").pop()?.replace(".png", "") ?? ""; // "IIT"
    const meta = (mod as any).default;
    const url = meta?.src ?? meta; // âœ… works whether it's metadata or string
    return [key, url];
  }),
);

const byOrderDescThenTitle = (
  a: (typeof projects)[0],
  b: (typeof projects)[0],
) => {
  const ao = a.data.order ?? 0;
  const bo = b.data.order ?? 0;
  if (bo !== ao) return bo - ao;
  return (a.data.title ?? "").localeCompare(b.data.title ?? "");
};

const featured = await getCollection("projects");
const projects = featured
  .filter((p) => p.data.featured)
  .slice(0, 3)
  .sort(byOrderDescThenTitle);

const timeline = await getCollection("timeline");
const workItems = timeline
  .filter((t) => t.data.kind === "work")
  .sort((a, b) => (b.data.order ?? 0) - (a.data.order ?? 0));

const eduItems = timeline
  .filter((t) => t.data.kind === "education")
  .sort((a, b) => (b.data.order ?? 0) - (a.data.order ?? 0));

/** Helper: returns the image URL (or null if not found) */
const getOrgLogo = (iconText: string) => orgLogos[iconText] ?? null;
---

<SiteLayout
  title="Alan Palayil"
  description="Enterprise data + platform modernization in financial systems."
>
  <section class="hero">
    <p class="kicker">
      Enterprise Data Engineer â€¢ Financial Systems â€¢ Cloud Platforms
    </p>

    <h1>
      Hello! Iâ€™m <strong>Alan Palayil</strong><span class="wave">ðŸ‘‹</span>
    </h1>

    <p class="lead">
      Iâ€™m an <span class="hl">Application Development Analyst</span> at
      <span class="hl">Genworth Financial</span>, working on Core Investment
      Accounting Platforms where correctness and reliability matter. I design
      and operate enterprise data pipelines across <span class="hl"
        >Legacy Systems</span
      > and <span class="hl">Cloud Platforms</span>, focusing on scalability,
      accuracy, and long-term maintainability.
    </p>

    <p class="sub">
      Exploring Enterprise Data Platforms, Cloud Systems, and Applied AI through
      both industry work and doctoral research.
    </p>

    <div class="socialRow" aria-label="Social links">
      <a class="social" href="/resume">
        <span class="icon" aria-hidden="true">
          <!-- Resume / Document icon -->
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path
              fill="currentColor"
              d="M6 2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8 1.5V8h4.5L14 3.5zM8 12h8v1.5H8V12zm0 4h8v1.5H8V16zm0-8h5v1.5H8V8z"
            ></path>
          </svg>
        </span>
        Resume
      </a>
      <span class="sep" aria-hidden="true">|</span>

      <a
        class="social"
        href="https://www.linkedin.com/in/alan-palayil/"
        target="_blank"
        rel="noreferrer"
      >
        <span class="icon" aria-hidden="true">
          <!-- LinkedIn icon -->
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path
              fill="currentColor"
              d="M20.45 20.45h-3.55v-5.57c0-1.33-.03-3.04-1.86-3.04-1.86 0-2.14 1.45-2.14 2.95v5.66H9.35V9h3.41v1.56h.05c.47-.9 1.62-1.86 3.33-1.86 3.56 0 4.22 2.35 4.22 5.41v6.34ZM5.34 7.43a2.06 2.06 0 1 1 0-4.12 2.06 2.06 0 0 1 0 4.12ZM7.12 20.45H3.56V9h3.56v11.45Z"
            ></path>
          </svg>
        </span>
        LinkedIn
      </a>
      <span class="sep" aria-hidden="true">|</span>
      <a
        class="social"
        href="https://github.com/AlanP13"
        target="_blank"
        rel="noreferrer"
      >
        <span class="icon" aria-hidden="true">
          <!-- GitHub icon -->
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path
              fill="currentColor"
              d="M12 2C6.48 2 2 6.58 2 12.26c0 4.5 2.87 8.31 6.84 9.66.5.1.68-.22.68-.48 0-.24-.01-.88-.01-1.73-2.78.62-3.37-1.38-3.37-1.38-.46-1.2-1.11-1.52-1.11-1.52-.91-.65.07-.64.07-.64 1 .07 1.53 1.06 1.53 1.06.9 1.58 2.36 1.12 2.94.86.09-.67.35-1.12.63-1.38-2.22-.26-4.56-1.14-4.56-5.09 0-1.12.39-2.03 1.03-2.75-.1-.26-.45-1.32.1-2.75 0 0 .84-.27 2.75 1.05A9.3 9.3 0 0 1 12 6.84c.85 0 1.71.12 2.51.35 1.9-1.32 2.74-1.05 2.74-1.05.55 1.43.2 2.49.1 2.75.64.72 1.03 1.63 1.03 2.75 0 3.96-2.34 4.82-4.57 5.08.36.32.68.96.68 1.93 0 1.39-.01 2.52-.01 2.86 0 .27.18.59.69.48A10.06 10.06 0 0 0 22 12.26C22 6.58 17.52 2 12 2Z"
            ></path>
          </svg>
        </span>
        GitHub
      </a>
      <span class="sep" aria-hidden="true">|</span>
      <a
        class="social"
        href="mailto:alanpalayil+portfolio@gmail.com"
        target="_blank"
        rel="noreferrer"
      >
        <span class="icon" aria-hidden="true">
          <!-- Email icon -->
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path
              fill="currentColor"
              d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm0 4.2-8 5.33L4 8.2V6l8 5.33L20 6v2.2Z"
            ></path>
          </svg>
        </span>
        Email
      </a>
      <span class="sep" aria-hidden="true">|</span>

      <a class="social" href="/about">
        More about me <span aria-hidden="true">â†’</span>
      </a>
    </div>
  </section>

  {/* WORK & EDUCATION PANEL */}
  <section class="block">
    <div class="weTabs" role="tablist" aria-label="Work and education tabs">
      <button
        class="weTab isActive"
        role="tab"
        aria-selected="true"
        aria-controls="we-work"
        id="tab-work"
        type="button"
      >
        Work
      </button>
      <button
        class="weTab"
        role="tab"
        aria-selected="false"
        aria-controls="we-edu"
        id="tab-edu"
        type="button"
      >
        Education
      </button>
    </div>

    <div class="wePanelWrap">
      {/* WORK PANEL */}
      <div
        class="wePanel isActive"
        role="tabpanel"
        id="we-work"
        aria-labelledby="tab-work"
      >
        <div class="weCard">
          {
            workItems.map((item, idx) => (
              <>
                <article class="weRow">
                  <div class="weLeft">
                    <div class="weLogoWrap" aria-hidden="true">
                      {getOrgLogo(item.data.iconText) ? (
                        <img
                          class="weLogoImg"
                          src={getOrgLogo(item.data.iconText)}
                          alt={`${item.data.iconText} logo`}
                          loading="lazy"
                        />
                      ) : (
                        <div class="weLogoFallback">{item.data.iconText}</div>
                      )}
                    </div>
                  </div>

                  <div class="weMain">
                    <div class="weTop">
                      <div class="weTitles">
                        <h3 class="weTitle">{item.data.title}</h3>
                        <p class="weOrg">
                          {item.data.orgUrl ? (
                            <a
                              href={item.data.orgUrl}
                              target="_blank"
                              rel="noreferrer"
                              class="weOrgLink"
                            >
                              <span class="weOrgName">{item.data.org}</span>
                            </a>
                          ) : (
                            <span class="weOrgName">{item.data.org}</span>
                          )}
                          {item.data.location ? ` â€¢ ${item.data.location}` : ""}
                        </p>
                      </div>

                      <div class="weRight">
                        <div class="weDates">{item.data.dates}</div>

                        {item.data.bullets?.length ? (
                          <button
                            class="weChevron"
                            type="button"
                            aria-expanded="false"
                            aria-label={`Expand details for ${item.data.title}`}
                            data-we-toggle
                          >
                            <svg
                              viewBox="0 0 24 24"
                              width="18"
                              height="18"
                              aria-hidden="true"
                            >
                              <path
                                fill="currentColor"
                                d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"
                              />
                            </svg>
                          </button>
                        ) : null}
                      </div>
                    </div>

                    {/* SUMMARY (always visible) */}
                    {item.data.subtitle ? (
                      <p class="weSummary">{item.data.subtitle}</p>
                    ) : item.data.bullets?.length ? (
                      <p class="weSummary">{item.data.bullets[0]}</p>
                    ) : null}

                    {/* COLLAPSIBLE BULLETS */}
                    {item.data.bullets?.length ? (
                      <div class="weDetails" data-we-details>
                        <ul class="weBullets">
                          {item.data.bullets.map((b) => (
                            <li>{b}</li>
                          ))}
                        </ul>
                      </div>
                    ) : null}
                  </div>
                </article>

                {idx !== workItems.length - 1 ? (
                  <div class="weDivider" />
                ) : null}
              </>
            ))
          }
        </div>
      </div>

      {/* EDUCATION PANEL */}
      <div
        class="wePanel"
        role="tabpanel"
        id="we-edu"
        aria-labelledby="tab-edu"
      >
        <div class="weCard">
          {
            eduItems.map((item, idx) => (
              <>
                <article class="weRow">
                  <div class="weLeft">
                    <div class="weLogoWrap" aria-hidden="true">
                      {getOrgLogo(item.data.iconText) ? (
                        <img
                          class="weLogoImg"
                          src={getOrgLogo(item.data.iconText)}
                          alt={`${item.data.iconText} logo`}
                          loading="lazy"
                        />
                      ) : (
                        <div class="weLogoFallback">{item.data.iconText}</div>
                      )}
                    </div>
                  </div>

                  <div class="weMain">
                    <div class="weTop">
                      <div class="weTitles">
                        <h3 class="weTitle">{item.data.title}</h3>
                        <p class="weOrg">
                          {item.data.orgUrl ? (
                            <a
                              href={item.data.orgUrl}
                              target="_blank"
                              rel="noreferrer"
                              class="weOrgLink"
                            >
                              <span class="weOrgName">{item.data.org}</span>
                            </a>
                          ) : (
                            <span class="weOrgName">{item.data.org}</span>
                          )}
                          {item.data.location ? ` â€¢ ${item.data.location}` : ""}
                        </p>
                      </div>

                      <div class="weRight">
                        <div class="weDates">{item.data.dates}</div>

                        {item.data.bullets?.length ? (
                          <button
                            class="weChevron"
                            type="button"
                            aria-expanded="false"
                            aria-label={`Expand details for ${item.data.title}`}
                            data-we-toggle
                          >
                            <svg
                              viewBox="0 0 24 24"
                              width="18"
                              height="18"
                              aria-hidden="true"
                            >
                              <path
                                fill="currentColor"
                                d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"
                              />
                            </svg>
                          </button>
                        ) : null}
                      </div>
                    </div>

                    {/* SUMMARY (always visible) */}
                    {item.data.subtitle ? (
                      <p class="weSummary">{item.data.subtitle}</p>
                    ) : item.data.bullets?.length ? (
                      <p class="weSummary">{item.data.bullets[0]}</p>
                    ) : null}

                    {/* COLLAPSIBLE BULLETS */}
                    {item.data.bullets?.length ? (
                      <div class="weDetails" data-we-details>
                        <ul class="weBullets">
                          {item.data.bullets.map((b) => (
                            <li>{b}</li>
                          ))}
                        </ul>
                      </div>
                    ) : null}
                  </div>
                </article>

                {idx !== eduItems.length - 1 ? <div class="weDivider" /> : null}
              </>
            ))
          }
        </div>
      </div>
    </div>

    <script is:inline>
      const tabs = Array.from(document.querySelectorAll(".weTab"));
      const panels = Array.from(document.querySelectorAll(".wePanel"));

      function activate(index) {
        tabs.forEach((t, i) => {
          const on = i === index;
          t.classList.toggle("isActive", on);
          t.setAttribute("aria-selected", on ? "true" : "false");
        });
        panels.forEach((p, i) => p.classList.toggle("isActive", i === index));
      }

      tabs.forEach((t, i) => t.addEventListener("click", () => activate(i)));

      // Work/Edu expand/collapse
      const rows = Array.from(document.querySelectorAll(".weRow"));

      function closeRow(row) {
        row.classList.remove("isOpen");
        const btn = row.querySelector("[data-we-toggle]");
        if (btn) btn.setAttribute("aria-expanded", "false");
      }

      function toggleRow(row) {
        const isOpen = row.classList.toggle("isOpen");
        const btn = row.querySelector("[data-we-toggle]");
        if (btn) btn.setAttribute("aria-expanded", isOpen ? "true" : "false");
      }

      rows.forEach((row) => {
        const btn = row.querySelector("[data-we-toggle]");
        if (!btn) return;

        btn.addEventListener("click", (e) => {
          e.stopPropagation();

          // only one open at a time
          rows.forEach((r) => r !== row && closeRow(r));

          toggleRow(row);
        });

        // Collapse when pointer leaves the row (smooth)
        row.addEventListener("mouseleave", () => closeRow(row));

        // Collapse if you click elsewhere
        document.addEventListener("click", (e) => {
          if (!row.contains(e.target)) closeRow(row);
        });

        // Keyboard: Escape closes
        row.addEventListener("keydown", (e) => {
          if (e.key === "Escape") closeRow(row);
        });
      });
    </script>
  </section>

  <section class="block">
    <h2>Featured Projects</h2>

    <div class="grid">
      {
        projects.map((p) => (
          <a class="card" href={`/projects/${p.slug}`}>
            <div>
              <h3>{p.data.title}</h3>
              <p class="muted">{p.data.summary}</p>
            </div>

            <div class="metaRow">
              <span class="pill">Project Details â†’</span>
              <span class="tech">{p.data.tech.slice(0, 5).join(" Â· ")}</span>
            </div>
          </a>
        ))
      }
    </div>

    <p class="allProjects">
      <a href="/projects">View all projects â†’</a>
    </p>
  </section>

  <section class="block">
    <h2>Technical Skills</h2>
    <div class="skills">
      <div class="s">
        <h3>Data Engineering & Pipelines</h3>
        <ul>
          <li>Enterprise ETL Pipeline Design, Orchestration, and Operations</li>
          <li>Data Transformation, Validation, Reconciliation, and Controls</li>
          <li>Accounting Message Generation and Journal Workflows</li>
          <li>Daily Batch Processing in Regulated Financial Environments</li>
        </ul>
      </div>

      <div class="s">
        <h3>Cloud & Data Platforms</h3>
        <ul>
          <li>Azure Synapse Analytics (Dedicated & Serverless)</li>
          <li>Azure-based Monitoring, Reliability, and Operations</li>
          <li>PostgreSQL and Relational Data Modeling</li>
          <li>Enterprise Scheduling and Workload Orchestration (AppWorx)</li>
        </ul>
      </div>

      <div class="s">
        <h3>Languages & Tooling</h3>
        <ul>
          <li>
            C++, Java and Python (Data Processing, Automation, Validation,
            Message Generation)
          </li>
          <li>
            MySQL and PostgreSQL (Reconciliation, Data Analysis, Performance
            Tuning)
          </li>
          <li>
            Git and JIRA (Version Control, Collaboration, Release Management,
            Issue Tracking)
          </li>
        </ul>
      </div>

      <div class="s">
        <h3>Enterprise Systems & Integration</h3>
        <ul>
          <li>PAM Investment Accounting Platforms</li>
          <li>Markit EDM and Enterprise ETL Workflows</li>
          <li>Informatica-based Data Integrations</li>
          <li>Vendor Migrations and Platform Modernization Initiatives</li>
        </ul>
      </div>
    </div>
  </section>

  <style>
    /* HERO */
    .hero {
      padding-top: 28px;
      padding-bottom: 12px;

      /* âœ… match section width */
      max-width: var(--content, 1100px);
      margin-left: auto;
      margin-right: auto;
    }
    .kicker {
      color: rgb(var(--muted));
      margin: 0 0 18px;
      font-size: 16px; /* was 14 */
      letter-spacing: 0.01em;
    }

    .hero h1 {
      margin: 0 0 18px;
      font-size: clamp(52px, 5vw, 68px); /* responsive, bigger */
      line-height: 1.02;
      letter-spacing: -0.03em;
    }

    .lead {
      font-size: 20px; /* was 18 */
      line-height: 1.75;
      max-width: 88ch; /* slightly wider text block */
      margin: 0 0 18px;
    }

    .sub {
      color: rgb(var(--muted));
      font-size: 17px; /* new */
      max-width: 88ch;
      margin: 0;
      line-height: 1.75;
      opacity: 0.95;
    }
    @media (max-width: 620px) {
      .kicker {
        font-size: 14px;
      }
      .lead {
        font-size: 18px;
      }
      .sub {
        font-size: 16px;
      }
    }
    .wave {
      display: inline-block;
      transform-origin: 70% 70%;
      cursor: default;
    }

    /* Trigger animation on hover */
    .wave:hover {
      animation: wave-hand 1.2s infinite ease-in-out;
      animation-delay: 0.1s;
    }

    /* Keyframes */
    @keyframes wave-hand {
      0% {
        transform: rotate(0deg);
      }
      15% {
        transform: rotate(14deg);
      }
      30% {
        transform: rotate(-8deg);
      }
      45% {
        transform: rotate(14deg);
      }
      60% {
        transform: rotate(-4deg);
      }
      75% {
        transform: rotate(10deg);
      }
      100% {
        transform: rotate(0deg);
      }
    }

    /* Social row sits lower in Jasonâ€™s hero */
    .socialRow {
      margin-top: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      color: rgb(var(--muted));
      font-size: 14px;
    }
    .social {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: rgb(var(--text));
      opacity: 0.95;
    }
    .social:hover {
      color: rgb(var(--accent));
    }
    .icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border: 1px solid rgb(var(--border));
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.02);
      color: rgb(var(--accent));
    }
    .sep {
      color: rgb(var(--border));
    }
    .more {
      color: rgb(var(--muted));
    }
    .more:hover {
      color: rgb(var(--accent));
    }

    /* SECTIONS */
    .block {
      margin-top: 64px; /* âœ… reduce from 96 */
      /* âœ… match section width */
      max-width: var(--content, 1100px);
      margin-left: auto;
      margin-right: auto;
    }
    .block h2 {
      margin: 0 0 12px;
      font-size: 28px;
      letter-spacing: -0.02em;
      color: color-mix(in srgb, rgb(var(--accent)) 95%, rgb(var(--muted)));
    }
    /* âœ… if a muted paragraph is empty, remove it (and its margin) */
    .block .muted:empty {
      display: none;
    }

    p {
      text-align: justify;
    }
    p strong {
      color: rgb(var(--text));
      font-weight: 700;
    }
    .hl {
      color: rgb(var(--accent));
      font-weight: 650;
    }

    h1 strong {
      color: rgb(var(--accent));
    }
    .muted {
      color: rgb(var(--muted));
    }

    /* Featured cards (MATCH Projects page) */
    .grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(1, minmax(0, 1fr));
    }
    @media (min-width: 860px) {
      .grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .card {
      text-decoration: none;
      border: 1px solid rgb(var(--border));
      border-radius: var(--r);
      padding: 14px 14px 12px;
      background: rgba(255, 255, 255, 0.02);
      transition:
        transform 120ms ease,
        border-color 120ms ease;
      color: rgb(var(--text));
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 172px;
    }
    .card:hover {
      transform: translateY(-2px);
      border-color: rgb(var(--accent));
    }
    .card h3 {
      margin: 0 0 8px;
      font-size: 16px;
    }

    .metaRow {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 12px;
    }

    .pill {
      color: rgb(var(--accent));
      font-size: 13px;
    }

    .tech {
      color: color-mix(in srgb, rgb(var(--text)) 65%, rgb(var(--muted)));
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 55%;
      text-align: right;
    }

    .allProjects {
      margin-top: 12px;
    }
    .allProjects a {
      color: rgb(var(--accent));
      text-decoration: none;
    }
    .allProjects a:hover {
      text-decoration: underline;
    }

    /* Work & Education â€” Ted-style tabs + card */
    .weHeader {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 16px;
    }

    .weTabs {
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding: 8px;
      border-radius: 14px;
      background: rgb(var(--card) / 0.55);
      border: 1px solid rgb(var(--border));
    }

    .weTab {
      appearance: none;
      border: 0;
      background: transparent;
      color: rgb(var(--muted));
      font-size: 14px;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition:
        background 120ms ease,
        color 120ms ease,
        border-color 120ms ease;
    }
    :root {
      --tab-active-bg: rgba(255, 255, 255, 0.06);
      --tab-hover-bg: rgba(255, 255, 255, 0.04);
      --tab-inset: rgba(255, 255, 255, 0.06);
      --card-bg: rgba(255, 255, 255, 0.02);
    }

    [data-theme="light"] {
      --tab-active-bg: rgba(0, 0, 0, 0.06); /* âœ… shows on light */
      --tab-hover-bg: rgba(0, 0, 0, 0.04);
      --tab-inset: rgba(0, 0, 0, 0.08);
      --card-bg: rgba(0, 0, 0, 0.02);
    }

    .weTab.isActive {
      background: rgb(var(--card) / 0.92);
      color: rgb(var(--text));
      box-shadow:
        0 0 0 1px rgb(var(--border) / 0.9) inset,
        0 8px 20px rgb(0 0 0 / 0.06);
    }

    .weTab:hover {
      background: var(--tab-hover-bg);
      color: rgb(var(--text));
    }

    .wePanelWrap {
      margin-top: 14px;
    }

    .wePanel {
      display: none;
    }
    .wePanel.isActive {
      display: block;
    }

    .weCard {
      border: 1px solid rgb(var(--border));
      border-radius: var(--r);
      background: rgb(var(--card) / 0.72);
      overflow: hidden;
      position: relative;
    }

    /* Subtle accent rail (like Tedâ€™s card feel) */
    .weCard::before {
      content: "";
      position: absolute;
      left: 0;
      top: 12px;
      bottom: 12px;
      width: 3px;
      border-radius: 999px;
      background: rgb(var(--accent));
      opacity: 0.65;
    }

    .weRow {
      display: grid;
      grid-template-columns: 48px 1fr;
      gap: 14px;
      padding: 16px 16px 16px 20px; /* extra left padding for rail */
    }

    .weDivider {
      height: 1px;
      background: rgb(var(--border) / 0.7);
      margin-left: 20px;
    }

    /* Logo container */
    .weLogoWrap {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      border: 1px solid rgb(var(--border));
      background: rgb(var(--card) / 0.65);
      display: grid;
      place-items: center;
      overflow: hidden;
    }

    /* Real image logo */
    .weLogoImg {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 6px; /* keeps logos from touching edges */
      filter: saturate(1.05);
      opacity: 0.95;
    }

    /* Fallback text if png missing */
    .weLogoFallback {
      font-weight: 650;
      font-size: 14px;
      color: rgb(var(--text));
    }

    /* Optional: make education logos tinted by accent when image missing */
    .weLogoFallback.edu {
      color: rgb(var(--accent));
    }

    .weTop {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 14px;
    }

    /* âœ… Right-side (dates + chevron) */
    .weRight {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .weTitles h3 {
      margin: 0 0 6px;
      font-size: 16px;
      letter-spacing: -0.02em;
    }

    .weOrg {
      margin: 0;
      color: rgb(var(--muted));
      font-size: 13px;
    }
    .weOrgName {
      color: color-mix(in srgb, rgb(var(--accent)) 65%, rgb(var(--muted)));
      font-weight: 500;
    }
    .weDates {
      color: rgb(var(--muted));
      font-size: 13px;
      white-space: nowrap;
      padding-top: 2px;
    }
    /* âœ… Summary line (always visible) */
    .weSummary {
      margin: 10px 0 0;
      color: color-mix(in srgb, rgb(var(--text)) 65%, rgb(var(--muted)));
      font-size: 14px;
      line-height: 1.6;
      max-width: 92ch;
    }

    /* âœ… Chevron button */
    .weChevron {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      border: 1px solid rgb(var(--border));
      background: rgba(255, 255, 255, 0.02);
      color: rgb(var(--muted));
      display: grid;
      place-items: center;
      cursor: pointer;
      transition:
        border-color 120ms ease,
        transform 120ms ease,
        color 120ms ease;
    }
    .weChevron:hover {
      border-color: rgb(var(--accent));
      color: rgb(var(--accent));
    }
    .weChevron svg {
      transition: transform 180ms ease;
    }

    /* âœ… Collapsible bullets (smooth) */
    .weDetails {
      display: grid;
      grid-template-rows: 0fr;
      transition: grid-template-rows 220ms ease;
    }
    .weDetails > .weBullets {
      overflow: hidden;
      margin: 10px 0 0;
    }

    .weRow.isOpen .weDetails {
      grid-template-rows: 1fr;
    }
    .weRow.isOpen .weChevron svg {
      transform: rotate(180deg);
    }

    .weBullets {
      padding-left: 18px;
      color: rgb(var(--muted));
    }

    .weBullets li {
      margin: 6px 0;
      line-height: 1.6;
    }
    .weOrgLink {
      font-weight: 700;
      color: rgb(var(--accent));
      text-decoration: none;
      text-underline-offset: 6px;
    }

    .weOrgLink:hover .weOrgName {
      text-decoration: underline solid;
    }

    /* Mobile: stack date under title */
    @media (max-width: 620px) {
      .weTop {
        flex-direction: column;
      }
      .weRight {
        width: 100%;
        justify-content: space-between;
      }
      .weDates {
        padding-top: 0;
      }
    }

    /* Skills */
    .skills {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    .skills h3 {
      font-size: 16px;
      margin: 0 0 10px;
    }
    @media (min-width: 860px) {
      .skills {
        grid-template-columns: 1fr 1fr;
      }
    }
    /* Skills hover highlight */
    .s {
      border: 1px solid rgb(var(--border));
      border-radius: var(--r);
      padding: 14px;
      background: var(--card-bg);
      transition:
        border-color 120ms ease,
        transform 120ms ease;
    }

    .s:hover {
      border-color: rgb(var(--accent)); /* âœ… accent border */
      transform: translateY(-2px); /* optional: same lift as cards */
    }

    .s h3 {
      margin: 0 0 10px;
      font-size: 15px;
    }
    ul {
      margin: 0;
      padding-left: 18px;
      color: rgb(var(--muted));
    }
    li {
      margin: 6px 0;
    }

    /* Contact buttons (kept) */
    .cta {
      display: flex;
      gap: 12px;
      margin-top: 16px;
      flex-wrap: wrap;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border-radius: 12px;
      background: rgb(var(--accent));
      color: white;
      text-decoration: none;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    .btn.ghost {
      background: rgba(255, 255, 255, 0.02);
      color: rgb(var(--text));
      border: 1px solid rgb(var(--border));
    }
    .btn.ghost:hover {
      border-color: rgb(var(--accent));
    }
  </style>
</SiteLayout>
